<% form_for :item, :url => "", :html => {:method => :post, :multipart => true} do |f| %>
<%= f.error_messages %>

<% disp = params[:create_directory] ? "" : "none" %>
<div id="new_directory" class="navi" style="display: <%= disp %>; padding: 5px;">
  <table>
    <tr>
      <td><%= @item.locale :new_directory %></td>
      <td>&nbsp;<%= f.text_field :new_directory, :class => "nameEn" %></td>
      <td>&nbsp;<input type="submit" name="create_directory" value="作成する" /></td>
    </tr>
  </table>
</div>

<% disp = params[:create_file] ? "" : "none" %>
<div id="new_file" class="navi" style="display: <%= disp %>; padding: 5px;">
  <table>
    <tr>
      <td><%= @item.locale :new_file %></td>
      <td>&nbsp;<%= f.text_field :new_file, :class => "nameEn" %></td>
      <td>&nbsp;<input type="submit" name="create_file" value="作成する" /></td>
    </tr>
  </table>
</div>

<%
disp = params[:upload_file] ? "" : "none"
chFile = "var name = $('item_new_upload').value.replace(/\\\\/g, '/').replace(/.*\\//, '');"
chFile += "if (name.match(/[^0-9a-z\\.\\-_\\+@]/i)) alert('保存ファイル名を半角英数字で入力してください。');"
%><div id="new_upload" class="navi" style="display: <%= disp %>; padding: 5px;">
  <table>
    <tr>
      <td><%= @item.locale :new_upload %></td>
      <td>&nbsp;<%= f.file_field :new_upload, :onchange => chFile, :size => 80, :style => "width: 40em;" %></td>
      <td>&nbsp;<input type="submit" name="upload_file" value="アップロード" /></td>
    </tr>
  </table>
</div>

<% end %>
